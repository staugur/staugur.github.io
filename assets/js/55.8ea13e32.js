(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{536:function(s,t,n){"use strict";n.r(t);var e=n(4),a=Object(e.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"incetops"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#incetops"}},[s._v("#")]),s._v(" IncetOps")]),s._v(" "),n("p",[s._v("基于Inception，一个审计、执行、回滚、统计sql的开源系统")]),s._v(" "),n("h5",{attrs:{id:"代码仓库-incetops-github"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#代码仓库-incetops-github"}},[s._v("#")]),s._v(" "),n("strong",[s._v("代码仓库：")]),n("a",{attrs:{href:"https://github.com/staugur/IncetOps",title:"IncetOps GitHub",target:"_blank",rel:"noopener noreferrer"}},[s._v("IncetOps GitHub"),n("OutboundLink")],1)]),s._v(" "),n("h4",{attrs:{id:"详细文档-http-docs-saintic-com-incetops-install-html"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#详细文档-http-docs-saintic-com-incetops-install-html"}},[s._v("#")]),s._v(" "),n("strong",[s._v("详细文档：")]),n("a",{attrs:{href:"http://docs.saintic.com/incetops/install.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://docs.saintic.com/incetops/install.html"),n("OutboundLink")],1)]),s._v(" "),n("p",[s._v("以下是概述：")]),s._v(" "),n("h4",{attrs:{id:"环境"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#环境"}},[s._v("#")]),s._v(" 环境")]),s._v(" "),n("blockquote",[n("ol",[n("li",[s._v("Python Version: 2.7")]),s._v(" "),n("li",[s._v("框架: Flask")]),s._v(" "),n("li",[s._v("依赖包: requirements.txt")]),s._v(" "),n("li",[s._v("依赖服务: MySQL + Redis + Passport(认证)")]),s._v(" "),n("li",[s._v("关于Inception的部署，请参考"),n("a",{attrs:{href:"https://blog.saintic.com/blog/259.html",title:"Inception部署",target:"_blank",rel:"noopener noreferrer"}},[s._v("Inception部署"),n("OutboundLink")],1)]),s._v(" "),n("li",[s._v("关于passport的部署，请参考"),n("a",{attrs:{href:"https://blog.saintic.com/blog/134.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://blog.saintic.com/blog/134.html"),n("OutboundLink")],1)])])]),s._v(" "),n("h4",{attrs:{id:"演示"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#演示"}},[s._v("#")]),s._v(" 演示")]),s._v(" "),n("p",[s._v("演示站任务无法执行，可添加Inception和DB，DB密码加密保存，不会泄露，当然仅测试！ "),n("a",{attrs:{href:"http://incetops.demo.saintic.com",title:"IncetOps Demo",target:"_blank",rel:"noopener noreferrer"}},[s._v("IncetOps Demo"),n("OutboundLink")],1)]),s._v(" "),n("h4",{attrs:{id:"功能"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#功能"}},[s._v("#")]),s._v(" 功能")]),s._v(" "),n("ol",[n("li",[s._v("支持多个Inception服务")]),s._v(" "),n("li",[s._v("支持多个数据库，数据库可设置推荐的Inception")]),s._v(" "),n("li",[s._v("任务支持立即和定时执行两种方式，且定时任务可取消，备份可选、警告可选等")]),s._v(" "),n("li",[s._v("任务支持OSC并且可以查看OSC详细进度，可取消OSC任务")]),s._v(" "),n("li",[s._v("任务支持查看回滚语句")]),s._v(" "),n("li",[s._v("统计数据")]),s._v(" "),n("li",[s._v("帮助")])]),s._v(" "),n("h4",{attrs:{id:"使用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#使用"}},[s._v("#")]),s._v(" 使用")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("1. 安装依赖环境:\n    1.0 git clone https://github.com/staugur/IncetOps && cd IncetOps\n    1.1 yum install -y gcc gcc-c++ python-devel libffi-devel openssl-devel mysql-devel\n    (或者Ubuntu下`apt-get install build-essential libmysqld-dev libssl-dev python-dev libffi-dev`)\n    1.2 pip install -r requirements.txt\n    1.3 需要安装 mysql && redis, mysql需要导入incetops.sql\n    1.4 认证需要安装`https://github.com/staugur/passport`,体验时可以将main.py中g.signin设置为True\n\n2. 修改配置文件:\n    可以直接修改配置文件，或者是添加环境变量, 环境变量的key均在config.py中定义, 必须参数主要有:\n    > MYSQL段，设置incetops_mysql_url环境变量\n    > REDIS段，设置incetops_redis_url环境变量\n    > SSO段，设置incetops_sso_app_id、incetops_sso_app_secret、incetops_sso_server等环境变量\n    > PLUGINS段，设置默认备份库地址incetops_defaultbackupdatabase环境变量，默认值是MYSQL段，即查看回滚语句时所在任务使用的inception服务对应的备份库地址，可能是不同的，此键只是默认，实际查看回滚时可以自定义输入。\n    > SYSTEM段中的incetops_hmac_sha256_key、incetops_aes_cbc_key、incetops_jwt_secret_key一定要与passport中一致，否则无法使用passport统一登录。\n\n3. 启动队列进程:\n    sh online_rq.sh start|stop|restart #启动|停止|重启rq、rqscheduler队列服务，用来执行sql任务\n\n4. 启动Web进程:\n    4.1 python main.py #开发环境启动\n    4.2 sh online_gunicorn.sh start|stop|restart #生产环境后台启动!\n\n5. Docker版请参考上面详细文档链接\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br")])]),n("h4",{attrs:{id:"nginx"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginx"}},[s._v("#")]),s._v(" Nginx")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('server {\n    listen       80;\n    server_name  YourDomain;\n    #不允许搜索引擎抓取信息\n    if ($http_user_agent ~* "qihoobot|Baiduspider|Googlebot|Googlebot-Mobile|Googlebot-Image|Mediapartners-Google|Adsbot-Google|Feedfetcher-Google|Yahoo! Slurp|Yahoo! Slurp China|YoudaoBot|Sosospider|Sogou spider|Sogou web spider|Sogou+web+spider|bingbot|MSNBot|ia_archiver|Tomato Bot") {\n        return 403;\n    }\n    #处理静态资源:\n    location ~ ^\\/static\\/.*$ {\n        root /xxxxx/IncetOps/src/;\n    }\n    location / {\n       proxy_pass http://127.0.0.1:16000;\n       proxy_set_header Host $host;\n       proxy_set_header X-Real-IP $remote_addr;\n       proxy_set_header X-Forwarded-Proto $scheme;\n       proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n    }\n}\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br")])]),n("h4",{attrs:{id:"效果图"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#效果图"}},[s._v("#")]),s._v(" 效果图")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://raw.githubusercontent.com/staugur/IncetOps/master/Snapshot/db.png",alt:"数据库"}}),n("br"),s._v(" "),n("img",{attrs:{src:"https://raw.githubusercontent.com/staugur/IncetOps/master/Snapshot/task.png",alt:"任务"}})])])}),[],!1,null,null,null);t.default=a.exports}}]);