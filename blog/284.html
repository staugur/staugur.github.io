<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><meta name=author content="Hiroshi.tao"><meta name=description content="一念博客，陶先森の博客，IT博客，技术记录与分享，开源项目与文档"><meta name=keywords content="SaintIC,Hiroshi.tao,Blog,博客,Linux,DevOps,sys,python,go,js,vue,flask,picbed,sapic,Flask-PluginKit,rtfd"><link rel=prev href=https://blog.saintic.com/blog/282.html><link rel=next href=https://blog.saintic.com/blog/285.html><link rel=canonical href=https://blog.saintic.com/blog/284.html><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#ffffff"><title>为Isso评论系统添加微信审核功能 | 一念博客</title><meta name=title content="为Isso评论系统添加微信审核功能 | 一念博客"><link rel=stylesheet href=/css/main.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/blog.saintic.com"},"articleSection":"blog","name":"为Isso评论系统添加微信审核功能","headline":"为Isso评论系统添加微信审核功能","description":"Isso是一个使用Python和JavaScript编写的轻量级的开源评论系统，它旨在成为Disqus的替代产品。 其特点： 使用 Markdown 评论 SQLite 后端 Disqus","inLanguage":"zh-cn","author":"Hiroshi.tao","creator":"Hiroshi.tao","publisher":"Hiroshi.tao","accountablePerson":"Hiroshi.tao","copyrightHolder":"Hiroshi.tao","copyrightYear":"2020","datePublished":"2020-08-03 00:00:00 \u002b0000 UTC","dateModified":"2020-08-03 00:00:00 \u002b0000 UTC","url":"https:\/\/blog.saintic.com\/blog\/284.html","wordCount":"641","keywords":["评论系统","一念博客"]}</script></head><body><div class=wrapper><nav class=navbar><progress class=content_progress max=0 value=0></progress><div class=container><div class="navbar-header header-back2home-logo"><span class=logo_mark>>$</span>
<a href=https://blog.saintic.com><span class=logo_text>cd /home/</span>
<span class=logo_cursor></span></a></div><div class=navbar-right><span class=menu><a class=menu-item href=/blog.html title>Blog</a>
<a class=menu-item href=/note.html title>Note</a>
<a class=menu-item href=/categories.html title>Categories</a>
<a class=menu-item href=/tags.html title>Tags</a>
<a class=menu-item href=/link.html title>Links</a>
<a class=menu-item href="https://www.baidu.com/s?wd=site:blog.saintic.com+" title>Baidu</a>
<a class=menu-item href="https://www.google.com/search?q=site:blog.saintic.com+" title>Google</a>
<a class=menu-item href=/about.html title=About>About</a>
<span class=divide></span>
<a href=javascript:void(0); class=theme-switch><i class="saintic-icon saintic-icon-dark-mode"></i></a></span></div></div></nav><nav class=navbar-mobile id=nav-mobile style=display:none><progress class=content_progress max=0 value=0></progress><div class=container><div class=navbar><div class="navbar-header header-logo"><a href=https://blog.saintic.com>一念博客</a></div><div class=navbar-right><div><a href=javascript:void(0); class=theme-switch><i class="saintic-icon saintic-icon-dark-mode"></i></a></div><div class=menu-toggle><span></span><span></span><span></span></div></div></div><div class=menu id=mobile-menu><nav class=mb-md><a class=menu-item href=/blog.html title><h3>Blog</h3><div class=menu-active></div></a><a class=menu-item href=/note.html title><h3>Note</h3><div class=menu-active></div></a><a class=menu-item href=/categories.html title><h3>Categories</h3><div class=menu-active></div></a><a class=menu-item href=/tags.html title><h3>Tags</h3><div class=menu-active></div></a><a class=menu-item href=/link.html title><h3>Links</h3><div class=menu-active></div></a><a class=menu-item href="https://www.baidu.com/s?wd=site:blog.saintic.com+" title><h3>Baidu</h3><div class=menu-active></div></a><a class=menu-item href="https://www.google.com/search?q=site:blog.saintic.com+" title><h3>Google</h3><div class=menu-active></div></a><a class=menu-item href=/about.html title=About><h3>About</h3><div class=menu-active></div></a></nav></div></div></nav><main class=main><div class=container><div class=toc><div class=page-header><strong>- 目录 -</strong></div><div id=page-scrollspy class=toc-nav><ul class=nav><ul class=nav><ul class=nav><li class=nav-item><a class="nav-link text-left" href=#%3ch3%20data-tool%3d%22mdnice%e7%bc%96%e8%be%91%e5%99%a8%22%20style%3d%22padding%3a%200px%3b%20color%3a%20black%3b%20font-size%3a%2017px%3b%20font-weight%3a%20bold%3b%20text-align%3a%20center%3b%20position%3a%20relative%3b%20margin-top%3a%2020px%3b%20margin-bottom%3a%2020px%3b%22%3e%3cspan%20class%3d%22prefix%22%20style%3d%22display%3a%20none%3b%22%3e%3c%2fspan%3e%3cspan%20class%3d%22content%22%20style%3d%22border-bottom%3a%202px%20solid%20RGBA%2879%2c%20177%2c%20249%2c%20.65%29%3b%20color%3a%20%232b2b2b%3b%20padding-bottom%3a%202px%3b%22%3e%3cspan%20style%3d%22width%3a%2030px%3b%20height%3a%2030px%3b%20display%3a%20block%3b%20background-image%3a%20url%28https%3a%2f%2ffiles.mdnice.com%2ffullstack-2.png%29%3b%20background-position%3a%20center%3b%20background-size%3a%2030px%3b%20margin%3a%20auto%3b%20opacity%3a%201%3b%20background-repeat%3a%20no-repeat%3b%20margin-bottom%3a%20-8px%3b%22%3e%3c%2fspan%3e%e5%89%8d%e8%a8%80%3c%2fspan%3e%3cspan%20class%3d%22suffix%22%20style%3d%22display%3a%20none%3b%22%3e%3c%2fspan%3e%3c%2fh3%3e>前言</a></li></ul></ul></ul><ul class=nav><ul class=nav><ul class=nav><li class=nav-item><a class="nav-link text-left" href=#%3ch3%20data-tool%3d%22mdnice%e7%bc%96%e8%be%91%e5%99%a8%22%20style%3d%22padding%3a%200px%3b%20color%3a%20black%3b%20font-size%3a%2017px%3b%20font-weight%3a%20bold%3b%20text-align%3a%20center%3b%20position%3a%20relative%3b%20margin-top%3a%2020px%3b%20margin-bottom%3a%2020px%3b%22%3e%3cspan%20class%3d%22prefix%22%20style%3d%22display%3a%20none%3b%22%3e%3c%2fspan%3e%3cspan%20class%3d%22content%22%20style%3d%22border-bottom%3a%202px%20solid%20RGBA%2879%2c%20177%2c%20249%2c%20.65%29%3b%20color%3a%20%232b2b2b%3b%20padding-bottom%3a%202px%3b%22%3e%3cspan%20style%3d%22width%3a%2030px%3b%20height%3a%2030px%3b%20display%3a%20block%3b%20background-image%3a%20url%28https%3a%2f%2ffiles.mdnice.com%2ffullstack-2.png%29%3b%20background-position%3a%20center%3b%20background-size%3a%2030px%3b%20margin%3a%20auto%3b%20opacity%3a%201%3b%20background-repeat%3a%20no-repeat%3b%20margin-bottom%3a%20-8px%3b%22%3e%3c%2fspan%3eNO.1%20%e4%bf%ae%e6%94%b9isso%2f__init__.py%e6%96%87%e4%bb%b6%3c%2fspan%3e%3cspan%20class%3d%22suffix%22%20style%3d%22display%3a%20none%3b%22%3e%3c%2fspan%3e%3c%2fh3%3e>NO.1 修改isso/__init__.py文件</a></li></ul></ul></ul><ul class=nav><ul class=nav><ul class=nav><ul class=nav><li class=nav-item><a class="nav-link text-left" href=#%3ch4%20data-tool%3d%22mdnice%e7%bc%96%e8%be%91%e5%99%a8%22%20style%3d%22margin-top%3a%2030px%3b%20margin-bottom%3a%2015px%3b%20padding%3a%200px%3b%20font-weight%3a%20bold%3b%20color%3a%20black%3b%20font-size%3a%2018px%3b%22%3e%3cspan%20class%3d%22prefix%22%20style%3d%22display%3a%20none%3b%22%3e%3c%2fspan%3e%3cspan%20class%3d%22content%22%20style%3d%22height%3a%2016px%3b%20line-height%3a%2016px%3b%20font-size%3a%2016px%3b%22%3e%3cspan%20style%3d%22background-image%3a%20url%28https%3a%2f%2ffiles.mdnice.com%2ffullstack-3.png%29%3b%20display%3a%20inline-block%3b%20width%3a%2016px%3b%20height%3a%2016px%3b%20background-size%3a%20100%25%3b%20background-position%3a%20left%20bottom%3b%20background-repeat%3a%20no-repeat%3b%20width%3a%2016px%3b%20height%3a%2015px%3b%20line-height%3a%2015px%3b%20margin-right%3a%206px%3b%20margin-bottom%3a%20-2px%3b%22%3e%3c%2fspan%3e1.%20%e5%a4%a7%e6%a6%82%2075L%3c%2fspan%3e%3cspan%20class%3d%22suffix%22%20style%3d%22display%3a%20none%3b%22%3e%3c%2fspan%3e%3c%2fh4%3e>1. 大概 75L</a></li></ul></ul></ul></ul><ul class=nav><ul class=nav><ul class=nav><ul class=nav><li class=nav-item><a class="nav-link text-left" href=#%3ch4%20data-tool%3d%22mdnice%e7%bc%96%e8%be%91%e5%99%a8%22%20style%3d%22margin-top%3a%2030px%3b%20margin-bottom%3a%2015px%3b%20padding%3a%200px%3b%20font-weight%3a%20bold%3b%20color%3a%20black%3b%20font-size%3a%2018px%3b%22%3e%3cspan%20class%3d%22prefix%22%20style%3d%22display%3a%20none%3b%22%3e%3c%2fspan%3e%3cspan%20class%3d%22content%22%20style%3d%22height%3a%2016px%3b%20line-height%3a%2016px%3b%20font-size%3a%2016px%3b%22%3e%3cspan%20style%3d%22background-image%3a%20url%28https%3a%2f%2ffiles.mdnice.com%2ffullstack-3.png%29%3b%20display%3a%20inline-block%3b%20width%3a%2016px%3b%20height%3a%2016px%3b%20background-size%3a%20100%25%3b%20background-position%3a%20left%20bottom%3b%20background-repeat%3a%20no-repeat%3b%20width%3a%2016px%3b%20height%3a%2015px%3b%20line-height%3a%2015px%3b%20margin-right%3a%206px%3b%20margin-bottom%3a%20-2px%3b%22%3e%3c%2fspan%3e2.%20%e5%a4%a7%e6%a6%82%20114L%3c%2fspan%3e%3cspan%20class%3d%22suffix%22%20style%3d%22display%3a%20none%3b%22%3e%3c%2fspan%3e%3c%2fh4%3e>2. 大概 114L</a></li></ul></ul></ul></ul><ul class=nav><ul class=nav><ul class=nav><li class=nav-item><a class="nav-link text-left" href=#%3ch3%20data-tool%3d%22mdnice%e7%bc%96%e8%be%91%e5%99%a8%22%20style%3d%22padding%3a%200px%3b%20color%3a%20black%3b%20font-size%3a%2017px%3b%20font-weight%3a%20bold%3b%20text-align%3a%20center%3b%20position%3a%20relative%3b%20margin-top%3a%2020px%3b%20margin-bottom%3a%2020px%3b%22%3e%3cspan%20class%3d%22prefix%22%20style%3d%22display%3a%20none%3b%22%3e%3c%2fspan%3e%3cspan%20class%3d%22content%22%20style%3d%22border-bottom%3a%202px%20solid%20RGBA%2879%2c%20177%2c%20249%2c%20.65%29%3b%20color%3a%20%232b2b2b%3b%20padding-bottom%3a%202px%3b%22%3e%3cspan%20style%3d%22width%3a%2030px%3b%20height%3a%2030px%3b%20display%3a%20block%3b%20background-image%3a%20url%28https%3a%2f%2ffiles.mdnice.com%2ffullstack-2.png%29%3b%20background-position%3a%20center%3b%20background-size%3a%2030px%3b%20margin%3a%20auto%3b%20opacity%3a%201%3b%20background-repeat%3a%20no-repeat%3b%20margin-bottom%3a%20-8px%3b%22%3e%3c%2fspan%3eNO.2%20%e4%bf%ae%e6%94%b9isso%2fext%2fnotifications.py%e6%96%87%e4%bb%b6%3c%2fspan%3e%3cspan%20class%3d%22suffix%22%20style%3d%22display%3a%20none%3b%22%3e%3c%2fspan%3e%3c%2fh3%3e>NO.2 修改isso/ext/notifications.py文件</a></li></ul></ul></ul><ul class=nav><ul class=nav><ul class=nav><ul class=nav><li class=nav-item><a class="nav-link text-left" href=#%3ch4%20data-tool%3d%22mdnice%e7%bc%96%e8%be%91%e5%99%a8%22%20style%3d%22margin-top%3a%2030px%3b%20margin-bottom%3a%2015px%3b%20padding%3a%200px%3b%20font-weight%3a%20bold%3b%20color%3a%20black%3b%20font-size%3a%2018px%3b%22%3e%3cspan%20class%3d%22prefix%22%20style%3d%22display%3a%20none%3b%22%3e%3c%2fspan%3e%3cspan%20class%3d%22content%22%20style%3d%22height%3a%2016px%3b%20line-height%3a%2016px%3b%20font-size%3a%2016px%3b%22%3e%3cspan%20style%3d%22background-image%3a%20url%28https%3a%2f%2ffiles.mdnice.com%2ffullstack-3.png%29%3b%20display%3a%20inline-block%3b%20width%3a%2016px%3b%20height%3a%2016px%3b%20background-size%3a%20100%25%3b%20background-position%3a%20left%20bottom%3b%20background-repeat%3a%20no-repeat%3b%20width%3a%2016px%3b%20height%3a%2015px%3b%20line-height%3a%2015px%3b%20margin-right%3a%206px%3b%20margin-bottom%3a%20-2px%3b%22%3e%3c%2fspan%3e1.%20%e5%a4%a7%e6%a6%82%2032L%3c%2fspan%3e%3cspan%20class%3d%22suffix%22%20style%3d%22display%3a%20none%3b%22%3e%3c%2fspan%3e%3c%2fh4%3e>1. 大概 32L</a></li></ul></ul></ul></ul><ul class=nav><ul class=nav><ul class=nav><ul class=nav><li class=nav-item><a class="nav-link text-left" href=#%3ch4%20data-tool%3d%22mdnice%e7%bc%96%e8%be%91%e5%99%a8%22%20style%3d%22margin-top%3a%2030px%3b%20margin-bottom%3a%2015px%3b%20padding%3a%200px%3b%20font-weight%3a%20bold%3b%20color%3a%20black%3b%20font-size%3a%2018px%3b%22%3e%3cspan%20class%3d%22prefix%22%20style%3d%22display%3a%20none%3b%22%3e%3c%2fspan%3e%3cspan%20class%3d%22content%22%20style%3d%22height%3a%2016px%3b%20line-height%3a%2016px%3b%20font-size%3a%2016px%3b%22%3e%3cspan%20style%3d%22background-image%3a%20url%28https%3a%2f%2ffiles.mdnice.com%2ffullstack-3.png%29%3b%20display%3a%20inline-block%3b%20width%3a%2016px%3b%20height%3a%2016px%3b%20background-size%3a%20100%25%3b%20background-position%3a%20left%20bottom%3b%20background-repeat%3a%20no-repeat%3b%20width%3a%2016px%3b%20height%3a%2015px%3b%20line-height%3a%2015px%3b%20margin-right%3a%206px%3b%20margin-bottom%3a%20-2px%3b%22%3e%3c%2fspan%3e2.%20%e5%a4%a7%e6%a6%82%2034L%3c%2fspan%3e%3cspan%20class%3d%22suffix%22%20style%3d%22display%3a%20none%3b%22%3e%3c%2fspan%3e%3c%2fh4%3e>2. 大概 34L</a></li></ul></ul></ul></ul><ul class=nav><ul class=nav><ul class=nav><ul class=nav><li class=nav-item><a class="nav-link text-left" href=#%3ch4%20data-tool%3d%22mdnice%e7%bc%96%e8%be%91%e5%99%a8%22%20style%3d%22margin-top%3a%2030px%3b%20margin-bottom%3a%2015px%3b%20padding%3a%200px%3b%20font-weight%3a%20bold%3b%20color%3a%20black%3b%20font-size%3a%2018px%3b%22%3e%3cspan%20class%3d%22prefix%22%20style%3d%22display%3a%20none%3b%22%3e%3c%2fspan%3e%3cspan%20class%3d%22content%22%20style%3d%22height%3a%2016px%3b%20line-height%3a%2016px%3b%20font-size%3a%2016px%3b%22%3e%3cspan%20style%3d%22background-image%3a%20url%28https%3a%2f%2ffiles.mdnice.com%2ffullstack-3.png%29%3b%20display%3a%20inline-block%3b%20width%3a%2016px%3b%20height%3a%2016px%3b%20background-size%3a%20100%25%3b%20background-position%3a%20left%20bottom%3b%20background-repeat%3a%20no-repeat%3b%20width%3a%2016px%3b%20height%3a%2015px%3b%20line-height%3a%2015px%3b%20margin-right%3a%206px%3b%20margin-bottom%3a%20-2px%3b%22%3e%3c%2fspan%3e3.%20%e5%9c%a8%e6%9c%ab%e5%b0%be%e5%a2%9e%e5%8a%a0Wechat%e5%ae%a1%e6%a0%b8%e7%b1%bb%3c%2fspan%3e%3cspan%20class%3d%22suffix%22%20style%3d%22display%3a%20none%3b%22%3e%3c%2fspan%3e%3c%2fh4%3e>3. 在末尾增加Wechat审核类</a></li></ul></ul></ul></ul><ul class=nav><ul class=nav><ul class=nav><li class=nav-item><a class="nav-link text-left" href=#%3ch3%20data-tool%3d%22mdnice%e7%bc%96%e8%be%91%e5%99%a8%22%20style%3d%22padding%3a%200px%3b%20color%3a%20black%3b%20font-size%3a%2017px%3b%20font-weight%3a%20bold%3b%20text-align%3a%20center%3b%20position%3a%20relative%3b%20margin-top%3a%2020px%3b%20margin-bottom%3a%2020px%3b%22%3e%3cspan%20class%3d%22prefix%22%20style%3d%22display%3a%20none%3b%22%3e%3c%2fspan%3e%3cspan%20class%3d%22content%22%20style%3d%22border-bottom%3a%202px%20solid%20RGBA%2879%2c%20177%2c%20249%2c%20.65%29%3b%20color%3a%20%232b2b2b%3b%20padding-bottom%3a%202px%3b%22%3e%3cspan%20style%3d%22width%3a%2030px%3b%20height%3a%2030px%3b%20display%3a%20block%3b%20background-image%3a%20url%28https%3a%2f%2ffiles.mdnice.com%2ffullstack-2.png%29%3b%20background-position%3a%20center%3b%20background-size%3a%2030px%3b%20margin%3a%20auto%3b%20opacity%3a%201%3b%20background-repeat%3a%20no-repeat%3b%20margin-bottom%3a%20-8px%3b%22%3e%3c%2fspan%3eNO.3%20%e4%bf%ae%e6%94%b9share%2fisso.conf%e6%96%87%e4%bb%b6%3c%2fspan%3e%3cspan%20class%3d%22suffix%22%20style%3d%22display%3a%20none%3b%22%3e%3c%2fspan%3e%3c%2fh3%3e>NO.3 修改share/isso.conf文件</a></li></ul></ul></ul><ul class=nav><ul class=nav><ul class=nav><li class=nav-item><a class="nav-link text-left" href=#%3ch3%20data-tool%3d%22mdnice%e7%bc%96%e8%be%91%e5%99%a8%22%20style%3d%22padding%3a%200px%3b%20color%3a%20black%3b%20font-size%3a%2017px%3b%20font-weight%3a%20bold%3b%20text-align%3a%20center%3b%20position%3a%20relative%3b%20margin-top%3a%2020px%3b%20margin-bottom%3a%2020px%3b%22%3e%3cspan%20class%3d%22prefix%22%20style%3d%22display%3a%20none%3b%22%3e%3c%2fspan%3e%3cspan%20class%3d%22content%22%20style%3d%22border-bottom%3a%202px%20solid%20RGBA%2879%2c%20177%2c%20249%2c%20.65%29%3b%20color%3a%20%232b2b2b%3b%20padding-bottom%3a%202px%3b%22%3e%3cspan%20style%3d%22width%3a%2030px%3b%20height%3a%2030px%3b%20display%3a%20block%3b%20background-image%3a%20url%28https%3a%2f%2ffiles.mdnice.com%2ffullstack-2.png%29%3b%20background-position%3a%20center%3b%20background-size%3a%2030px%3b%20margin%3a%20auto%3b%20opacity%3a%201%3b%20background-repeat%3a%20no-repeat%3b%20margin-bottom%3a%20-8px%3b%22%3e%3c%2fspan%3eEND%3c%2fspan%3e%3cspan%20class%3d%22suffix%22%20style%3d%22display%3a%20none%3b%22%3e%3c%2fspan%3e%3c%2fh3%3e>END</a></li></ul></ul></ul></div></div><article class=post-warp itemscope itemtype=http://schema.org/Article><header class=post-header><h1 class=post-title itemprop="name headline">为Isso评论系统添加微信审核功能</h1><div class=post-meta>Written by <a itemprop=name href=https://blog.saintic.com rel=author>Hiroshi.tao</a> with ♥
<span class=post-time>on <time datetime=2020-08-03 itemprop=datePublished>August 3, 2020</time></span>
in
<i class="saintic-icon saintic-icon-folder"></i>
<span class=post-category><a href=https://blog.saintic.com/categories/%E5%BA%94%E7%94%A8%E6%9C%8D%E5%8A%A1.html>应用服务</a></span>
<span class=post-word-count>641 words</span></div></header><div class=post-content><p><section id=nice data-tool=mdnice编辑器 data-website=https://www.mdnice.com style="font-size:16px;padding:0 10px;word-spacing:0;word-break:break-word;word-wrap:break-word;text-align:left;line-height:1.25;color:#2b2b2b;font-family:Optima-Regular,Optima,PingFangTC-Light,PingFangSC-light,PingFangTC-light;letter-spacing:2px;background-image:linear-gradient(90deg,rgba(50,0,0,4%) 3%,transparent 3%),linear-gradient(360deg,rgba(50,0,0,4%) 3%,transparent 3%);background-size:20px 20px;background-position:50%"><p data-tool=mdnice编辑器 style="padding-top:8px;padding-bottom:8px;line-height:26px;color:#2b2b2b;margin:10px 0;letter-spacing:2px;font-size:14px;word-spacing:2px">Isso是一个使用Python和JavaScript编写的轻量级的开源评论系统，它旨在成为Disqus的替代产品。</p><p data-tool=mdnice编辑器 style="padding-top:8px;padding-bottom:8px;line-height:26px;color:#2b2b2b;margin:10px 0;letter-spacing:2px;font-size:14px;word-spacing:2px">其特点：</p><ul data-tool=mdnice编辑器 style=margin-top:8px;margin-bottom:8px;padding-left:25px;font-size:15px;color:#595959;list-style-type:circle><li><section style=margin-top:5px;margin-bottom:5px;line-height:26px;text-align:left;font-size:14px;font-weight:400;color:#595959><p style="padding-top:8px;padding-bottom:8px;line-height:26px;color:#2b2b2b;margin:10px 0;letter-spacing:2px;font-size:14px;word-spacing:2px">使用 Markdown 评论</p></section></li><li><section style=margin-top:5px;margin-bottom:5px;line-height:26px;text-align:left;font-size:14px;font-weight:400;color:#595959><p style="padding-top:8px;padding-bottom:8px;line-height:26px;color:#2b2b2b;margin:10px 0;letter-spacing:2px;font-size:14px;word-spacing:2px">SQLite 后端</p></section></li><li><section style=margin-top:5px;margin-bottom:5px;line-height:26px;text-align:left;font-size:14px;font-weight:400;color:#595959><p style="padding-top:8px;padding-bottom:8px;line-height:26px;color:#2b2b2b;margin:10px 0;letter-spacing:2px;font-size:14px;word-spacing:2px">Disqus & WordPress 导入</p></section></li><li><section style=margin-top:5px;margin-bottom:5px;line-height:26px;text-align:left;font-size:14px;font-weight:400;color:#595959><p style="padding-top:8px;padding-bottom:8px;line-height:26px;color:#2b2b2b;margin:10px 0;letter-spacing:2px;font-size:14px;word-spacing:2px">可配置的 JS 客户端，支持 Firefox, Safari, Chrome 和 IE10。</p></section></li></ul><p data-tool=mdnice编辑器 style="padding-top:8px;padding-bottom:8px;line-height:26px;color:#2b2b2b;margin:10px 0;letter-spacing:2px;font-size:14px;word-spacing:2px">我之前写了<a href=https://blog.saintic.com/blog/275.html style="text-decoration:none;word-wrap:break-word;color:#40b8fa;font-weight:400;border-bottom:1px solid #3baafa">Isso的文章</a>，包括部署过程记录、使用经验总结，以及我fork的isso-cn版本，此版本主要增加了微信审核的功能，鉴于一些情况，现将微信审核部分代码单独拎出来，这样“按图索骥”，可以实现原isso微信审核功能。</p><p data-tool=mdnice编辑器 style="padding-top:8px;padding-bottom:8px;line-height:26px;color:#2b2b2b;margin:10px 0;letter-spacing:2px;font-size:14px;word-spacing:2px">以下细节可以参考我的<a href=https://github.com/staugur/isso-cn/commit/17e7fe4dc8a969c6af80729aa87b663d0351e4bd style="text-decoration:none;word-wrap:break-word;color:#40b8fa;font-weight:400;border-bottom:1px solid #3baafa">这个commit</a>实现。</p><h3 data-tool=mdnice编辑器 style=padding:0;color:#000;font-size:17px;font-weight:700;text-align:center;position:relative;margin-top:20px;margin-bottom:20px><span class=prefix style=display:none></span><span class=content style="border-bottom:2px solid RGBA(79,177,249,.65);color:#2b2b2b;padding-bottom:2px"><span style=width:30px;height:30px;display:block;background-image:url(https://files.mdnice.com/fullstack-2.png);background-position:50%;background-size:30px;margin:auto;opacity:1;background-repeat:no-repeat;margin-bottom:-8px></span>前言</span><span class=suffix style=display:none></span></h3><p data-tool=mdnice编辑器 style="padding-top:8px;padding-bottom:8px;line-height:26px;color:#2b2b2b;margin:10px 0;letter-spacing:2px;font-size:14px;word-spacing:2px">下载isso，可以用git克隆master最新代码，或者直接下载某个发行版，当然建议直接用pip安装。</p><p data-tool=mdnice编辑器 style="padding-top:8px;padding-bottom:8px;line-height:26px;color:#2b2b2b;margin:10px 0;letter-spacing:2px;font-size:14px;word-spacing:2px">注意：从源码安装还是挺复杂，需要构建静态资源。</p><p data-tool=mdnice编辑器 style="padding-top:8px;padding-bottom:8px;line-height:26px;color:#2b2b2b;margin:10px 0;letter-spacing:2px;font-size:14px;word-spacing:2px">不过本文这不是重点，可以查阅<a href=https://isso-cn.rtfd.vip style="text-decoration:none;word-wrap:break-word;color:#40b8fa;font-weight:400;border-bottom:1px solid #3baafa">中文文档</a>或Google...</p><h3 data-tool=mdnice编辑器 style=padding:0;color:#000;font-size:17px;font-weight:700;text-align:center;position:relative;margin-top:20px;margin-bottom:20px><span class=prefix style=display:none></span><span class=content style="border-bottom:2px solid RGBA(79,177,249,.65);color:#2b2b2b;padding-bottom:2px"><span style=width:30px;height:30px;display:block;background-image:url(https://files.mdnice.com/fullstack-2.png);background-position:50%;background-size:30px;margin:auto;opacity:1;background-repeat:no-repeat;margin-bottom:-8px></span>NO.1 修改isso/__init__.py文件</span><span class=suffix style=display:none></span></h3><h4 data-tool=mdnice编辑器 style=margin-top:30px;margin-bottom:15px;padding:0;font-weight:700;color:#000;font-size:18px><span class=prefix style=display:none></span><span class=content style=height:16px;line-height:16px;font-size:16px><span style="background-image:url(https://files.mdnice.com/fullstack-3.png);display:inline-block;width:16px;height:16px;background-size:100%;background-position:0 100%;background-repeat:no-repeat;width:16px;height:15px;line-height:15px;margin-right:6px;margin-bottom:-2px"></span>1. 大概 75L</span><span class=suffix style=display:none></span></h4><p data-tool=mdnice编辑器 style="padding-top:8px;padding-bottom:8px;line-height:26px;color:#2b2b2b;margin:10px 0;letter-spacing:2px;font-size:14px;word-spacing:2px"><code style="font-size:14px;word-wrap:break-word;margin:0 2px;background-color:rgba(27,31,35,5%);font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;word-break:break-all;color:#3594f7;background:RGBA(59,170,250,.1);padding:0 2px;border-radius:2px;height:21px;line-height:22px">from isso.ext.notifications import Stdout, SMTP</code></p><p data-tool=mdnice编辑器 style="padding-top:8px;padding-bottom:8px;line-height:26px;color:#2b2b2b;margin:10px 0;letter-spacing:2px;font-size:14px;word-spacing:2px">改为</p><p data-tool=mdnice编辑器 style="padding-top:8px;padding-bottom:8px;line-height:26px;color:#2b2b2b;margin:10px 0;letter-spacing:2px;font-size:14px;word-spacing:2px"><code style="font-size:14px;word-wrap:break-word;margin:0 2px;background-color:rgba(27,31,35,5%);font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;word-break:break-all;color:#3594f7;background:RGBA(59,170,250,.1);padding:0 2px;border-radius:2px;height:21px;line-height:22px">from isso.ext.notifications import Stdout, SMTP, Wechat</code></p><h4 data-tool=mdnice编辑器 style=margin-top:30px;margin-bottom:15px;padding:0;font-weight:700;color:#000;font-size:18px><span class=prefix style=display:none></span><span class=content style=height:16px;line-height:16px;font-size:16px><span style="background-image:url(https://files.mdnice.com/fullstack-3.png);display:inline-block;width:16px;height:16px;background-size:100%;background-position:0 100%;background-repeat:no-repeat;width:16px;height:15px;line-height:15px;margin-right:6px;margin-bottom:-2px"></span>2. 大概 114L</span><span class=suffix style=display:none></span></h4><p data-tool=mdnice编辑器 style="padding-top:8px;padding-bottom:8px;line-height:26px;color:#2b2b2b;margin:10px 0;letter-spacing:2px;font-size:14px;word-spacing:2px">在</p><pre class=custom data-tool=mdnice编辑器 style="margin-top:10px;margin-bottom:10px;border-radius:5px;box-shadow:rgba(0,0,0,.55)0 2px 10px"><span style="display:block;background:url(https://files.mdnice.com/point.png);height:30px;width:100%;background-size:40px;background-repeat:no-repeat;background-color:#f8f8f8;margin-bottom:-7px;border-radius:5px;background-position:10px 10px"></span><code class=hljs style="overflow-x:auto;padding:16px;color:#333;display:-webkit-box;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;font-size:12px;-webkit-overflow-scrolling:touch;letter-spacing:0;padding-top:15px;background:#f8f8f8;border-radius:5px"><span class=hljs-keyword style=color:#333;font-weight:700;line-height:26px>elif</span>&nbsp;backend&nbsp;<span class=hljs-keyword style=color:#333;font-weight:700;line-height:26px>in</span>&nbsp;(<span class=hljs-string style=color:#d14;line-height:26px>"smtp"</span>,&nbsp;<span class=hljs-string style=color:#d14;line-height:26px>"SMTP"</span>):<br>&nbsp;&nbsp;&nbsp;&nbsp;smtp_backend&nbsp;=&nbsp;True<br></code></pre><p data-tool=mdnice编辑器 style="padding-top:8px;padding-bottom:8px;line-height:26px;color:#2b2b2b;margin:10px 0;letter-spacing:2px;font-size:14px;word-spacing:2px">后面添加</p><pre class=custom data-tool=mdnice编辑器 style="margin-top:10px;margin-bottom:10px;border-radius:5px;box-shadow:rgba(0,0,0,.55)0 2px 10px"><span style="display:block;background:url(https://files.mdnice.com/point.png);height:30px;width:100%;background-size:40px;background-repeat:no-repeat;background-color:#f8f8f8;margin-bottom:-7px;border-radius:5px;background-position:10px 10px"></span><code class=hljs style="overflow-x:auto;padding:16px;color:#333;display:-webkit-box;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;font-size:12px;-webkit-overflow-scrolling:touch;letter-spacing:0;padding-top:15px;background:#f8f8f8;border-radius:5px"><span class=hljs-keyword style=color:#333;font-weight:700;line-height:26px>elif</span>&nbsp;backend&nbsp;<span class=hljs-keyword style=color:#333;font-weight:700;line-height:26px>in</span>&nbsp;(<span class=hljs-string style=color:#d14;line-height:26px>"wechat"</span>,&nbsp;<span class=hljs-string style=color:#d14;line-height:26px>"WECHAT"</span>):<br>&nbsp;&nbsp;&nbsp;&nbsp;subscribers.append(Wechat(self))<br></code></pre><h3 data-tool=mdnice编辑器 style=padding:0;color:#000;font-size:17px;font-weight:700;text-align:center;position:relative;margin-top:20px;margin-bottom:20px><span class=prefix style=display:none></span><span class=content style="border-bottom:2px solid RGBA(79,177,249,.65);color:#2b2b2b;padding-bottom:2px"><span style=width:30px;height:30px;display:block;background-image:url(https://files.mdnice.com/fullstack-2.png);background-position:50%;background-size:30px;margin:auto;opacity:1;background-repeat:no-repeat;margin-bottom:-8px></span>NO.2 修改isso/ext/notifications.py文件</span><span class=suffix style=display:none></span></h3><h4 data-tool=mdnice编辑器 style=margin-top:30px;margin-bottom:15px;padding:0;font-weight:700;color:#000;font-size:18px><span class=prefix style=display:none></span><span class=content style=height:16px;line-height:16px;font-size:16px><span style="background-image:url(https://files.mdnice.com/fullstack-3.png);display:inline-block;width:16px;height:16px;background-size:100%;background-position:0 100%;background-repeat:no-repeat;width:16px;height:15px;line-height:15px;margin-right:6px;margin-bottom:-2px"></span>1. 大概 32L</span><span class=suffix style=display:none></span></h4><p data-tool=mdnice编辑器 style="padding-top:8px;padding-bottom:8px;line-height:26px;color:#2b2b2b;margin:10px 0;letter-spacing:2px;font-size:14px;word-spacing:2px">添加 <code style="font-size:14px;word-wrap:break-word;margin:0 2px;background-color:rgba(27,31,35,5%);font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;word-break:break-all;color:#3594f7;background:RGBA(59,170,250,.1);padding:0 2px;border-radius:2px;height:21px;line-height:22px">from isso.utils.http import curl</code></p><h4 data-tool=mdnice编辑器 style=margin-top:30px;margin-bottom:15px;padding:0;font-weight:700;color:#000;font-size:18px><span class=prefix style=display:none></span><span class=content style=height:16px;line-height:16px;font-size:16px><span style="background-image:url(https://files.mdnice.com/fullstack-3.png);display:inline-block;width:16px;height:16px;background-size:100%;background-position:0 100%;background-repeat:no-repeat;width:16px;height:15px;line-height:15px;margin-right:6px;margin-bottom:-2px"></span>2. 大概 34L</span><span class=suffix style=display:none></span></h4><p data-tool=mdnice编辑器 style="padding-top:8px;padding-bottom:8px;line-height:26px;color:#2b2b2b;margin:10px 0;letter-spacing:2px;font-size:14px;word-spacing:2px">原本<code style="font-size:14px;word-wrap:break-word;margin:0 2px;background-color:rgba(27,31,35,5%);font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;word-break:break-all;color:#3594f7;background:RGBA(59,170,250,.1);padding:0 2px;border-radius:2px;height:21px;line-height:22px">if PY2K</code>更改如下：</p><pre class=custom data-tool=mdnice编辑器 style="margin-top:10px;margin-bottom:10px;border-radius:5px;box-shadow:rgba(0,0,0,.55)0 2px 10px"><span style="display:block;background:url(https://files.mdnice.com/point.png);height:30px;width:100%;background-size:40px;background-repeat:no-repeat;background-color:#f8f8f8;margin-bottom:-7px;border-radius:5px;background-position:10px 10px"></span><code class=hljs style="overflow-x:auto;padding:16px;color:#333;display:-webkit-box;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;font-size:12px;-webkit-overflow-scrolling:touch;letter-spacing:0;padding-top:15px;background:#f8f8f8;border-radius:5px"><span class=hljs-keyword style=color:#333;font-weight:700;line-height:26px>if</span>&nbsp;PY2K:<br>&nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;thread&nbsp;import&nbsp;start_new_thread<br>&nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;urllib&nbsp;import&nbsp;urlencode<br><span class=hljs-keyword style=color:#333;font-weight:700;line-height:26px>else</span>:<br>&nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;_thread&nbsp;import&nbsp;start_new_thread<br>&nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;urllib.parse&nbsp;import&nbsp;urlencode<br></code></pre><h4 data-tool=mdnice编辑器 style=margin-top:30px;margin-bottom:15px;padding:0;font-weight:700;color:#000;font-size:18px><span class=prefix style=display:none></span><span class=content style=height:16px;line-height:16px;font-size:16px><span style="background-image:url(https://files.mdnice.com/fullstack-3.png);display:inline-block;width:16px;height:16px;background-size:100%;background-position:0 100%;background-repeat:no-repeat;width:16px;height:15px;line-height:15px;margin-right:6px;margin-bottom:-2px"></span>3. 在末尾增加Wechat审核类</span><span class=suffix style=display:none></span></h4><p data-tool=mdnice编辑器 style="padding-top:8px;padding-bottom:8px;line-height:26px;color:#2b2b2b;margin:10px 0;letter-spacing:2px;font-size:14px;word-spacing:2px">以下内容也许非最新，建议查看<a href=https://github.com/staugur/isso-cn/blob/master/isso/ext/notifications.py#L247 style="text-decoration:none;word-wrap:break-word;color:#40b8fa;font-weight:400;border-bottom:1px solid #3baafa">这个文件</a></p><pre class=custom data-tool=mdnice编辑器 style="margin-top:10px;margin-bottom:10px;border-radius:5px;box-shadow:rgba(0,0,0,.55)0 2px 10px"><span style="display:block;background:url(https://files.mdnice.com/point.png);height:30px;width:100%;background-size:40px;background-repeat:no-repeat;background-color:#f8f8f8;margin-bottom:-7px;border-radius:5px;background-position:10px 10px"></span><code class=hljs style="overflow-x:auto;padding:16px;color:#333;display:-webkit-box;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;font-size:12px;-webkit-overflow-scrolling:touch;letter-spacing:0;padding-top:15px;background:#f8f8f8;border-radius:5px">class&nbsp;Wechat(object):<br><br>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;__init__(self,&nbsp;isso):<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.isso&nbsp;=&nbsp;isso<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.conf&nbsp;=&nbsp;isso.conf.section(<span class=hljs-string style=color:#d14;line-height:26px>"wechat"</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.public_endpoint&nbsp;=&nbsp;isso.conf.get(<span class=hljs-string style=color:#d14;line-height:26px>"server"</span>,&nbsp;<span class=hljs-string style=color:#d14;line-height:26px>"public-endpoint"</span>)&nbsp;or&nbsp;<span class=hljs-built_in style=color:#0086b3;line-height:26px>local</span>(<span class=hljs-string style=color:#d14;line-height:26px>"host"</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.admin_notify&nbsp;=&nbsp;any((n&nbsp;<span class=hljs-keyword style=color:#333;font-weight:700;line-height:26px>in</span>&nbsp;(<span class=hljs-string style=color:#d14;line-height:26px>"wechat"</span>,&nbsp;<span class=hljs-string style=color:#d14;line-height:26px>"WECHAT"</span>))&nbsp;<span class=hljs-keyword style=color:#333;font-weight:700;line-height:26px>for</span>&nbsp;n&nbsp;<span class=hljs-keyword style=color:#333;font-weight:700;line-height:26px>in</span>&nbsp;isso.conf.getlist(<span class=hljs-string style=color:#d14;line-height:26px>"general"</span>,&nbsp;<span class=hljs-string style=color:#d14;line-height:26px>"notify"</span>))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.moderated&nbsp;=&nbsp;isso.conf.getboolean(<span class=hljs-string style=color:#d14;line-height:26px>"moderation"</span>,&nbsp;<span class=hljs-string style=color:#d14;line-height:26px>"enabled"</span>)<br><br>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;__iter__(self):<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;yield&nbsp;<span class=hljs-string style=color:#d14;line-height:26px>"comments.new:after-save"</span>,&nbsp;self.notify_new<br><br>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;format(self,&nbsp;thread,&nbsp;comment):<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;md&nbsp;=&nbsp;[]<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;author&nbsp;=&nbsp;comment[<span class=hljs-string style=color:#d14;line-height:26px>"author"</span>]&nbsp;or&nbsp;<span class=hljs-string style=color:#d14;line-height:26px>"Anonymous"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-keyword style=color:#333;font-weight:700;line-height:26px>if</span>&nbsp;comment[<span class=hljs-string style=color:#d14;line-height:26px>"email"</span>]:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;author&nbsp;+=&nbsp;<span class=hljs-string style=color:#d14;line-height:26px>"&nbsp;&lt;%s&gt;"</span>&nbsp;%&nbsp;comment[<span class=hljs-string style=color:#d14;line-height:26px>"email"</span>]<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;md.append(author&nbsp;+&nbsp;<span class=hljs-string style=color:#d14;line-height:26px>"&nbsp;wrote:\n"</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;md.append(<span class=hljs-string style=color:#d14;line-height:26px>"\n"</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;md.append(comment[<span class=hljs-string style=color:#d14;line-height:26px>"text"</span>]&nbsp;+&nbsp;<span class=hljs-string style=color:#d14;line-height:26px>"\n"</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;md.append(<span class=hljs-string style=color:#d14;line-height:26px>"\n"</span>)<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-keyword style=color:#333;font-weight:700;line-height:26px>if</span>&nbsp;comment[<span class=hljs-string style=color:#d14;line-height:26px>"website"</span>]:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;md.append(<span class=hljs-string style=color:#d14;line-height:26px>"User's&nbsp;URL:&nbsp;%s\n"</span>&nbsp;%&nbsp;comment[<span class=hljs-string style=color:#d14;line-height:26px>"website"</span>])<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;md.append(<span class=hljs-string style=color:#d14;line-height:26px>"IP&nbsp;address:&nbsp;%s\n"</span>&nbsp;%&nbsp;comment[<span class=hljs-string style=color:#d14;line-height:26px>"remote_addr"</span>])<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;view_uri&nbsp;=&nbsp;<span class=hljs-built_in style=color:#0086b3;line-height:26px>local</span>(<span class=hljs-string style=color:#d14;line-height:26px>"origin"</span>)&nbsp;+&nbsp;thread[<span class=hljs-string style=color:#d14;line-height:26px>"uri"</span>]&nbsp;+&nbsp;<span class=hljs-string style=color:#d14;line-height:26px>"#isso-%i"</span>&nbsp;%&nbsp;comment[<span class=hljs-string style=color:#d14;line-height:26px>"id"</span>]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-keyword style=color:#333;font-weight:700;line-height:26px>if</span>&nbsp;not&nbsp;self.moderated:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;md.append(<span class=hljs-string style=color:#d14;line-height:26px>"Link&nbsp;to&nbsp;comment:&nbsp;%s\n"</span>&nbsp;%&nbsp;view_uri)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;md.append(<span class=hljs-string style=color:#d14;line-height:26px>"\n"</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;md.append(<span class=hljs-string style=color:#d14;line-height:26px>"---\n"</span>)<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uri&nbsp;=&nbsp;self.public_endpoint&nbsp;+&nbsp;<span class=hljs-string style=color:#d14;line-height:26px>"/id/%i"</span>&nbsp;%&nbsp;comment[<span class=hljs-string style=color:#d14;line-height:26px>"id"</span>]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;key&nbsp;=&nbsp;self.isso.sign(comment[<span class=hljs-string style=color:#d14;line-height:26px>"id"</span>])<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete_uri&nbsp;=&nbsp;uri&nbsp;+&nbsp;<span class=hljs-string style=color:#d14;line-height:26px>"/delete/"</span>&nbsp;+&nbsp;key<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;activate_uri&nbsp;=&nbsp;uri&nbsp;+&nbsp;<span class=hljs-string style=color:#d14;line-height:26px>"/activate/"</span>&nbsp;+&nbsp;key<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-keyword style=color:#333;font-weight:700;line-height:26px>if</span>&nbsp;not&nbsp;self.moderated:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;md.append(<span class=hljs-string style=color:#d14;line-height:26px>"Delete&nbsp;comment:&nbsp;%s\n"</span>&nbsp;%&nbsp;delete_uri)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-keyword style=color:#333;font-weight:700;line-height:26px>if</span>&nbsp;comment[<span class=hljs-string style=color:#d14;line-height:26px>"mode"</span>]&nbsp;==&nbsp;2:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;md.append(<span class=hljs-string style=color:#d14;line-height:26px>"Activate&nbsp;comment:&nbsp;%s\n"</span>&nbsp;%&nbsp;activate_uri)<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rv&nbsp;=&nbsp;<span class=hljs-string style=color:#d14;line-height:26px>"\n"</span>.join(md)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-keyword style=color:#333;font-weight:700;line-height:26px>if</span>&nbsp;self.moderated:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-built_in style=color:#0086b3;line-height:26px>return</span>&nbsp;dict(rv=rv,&nbsp;v=view_uri,&nbsp;d=delete_uri,&nbsp;a=activate_uri)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-keyword style=color:#333;font-weight:700;line-height:26px>else</span>:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-built_in style=color:#0086b3;line-height:26px>return</span>&nbsp;rv<br><br>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;notify_new(self,&nbsp;thread,&nbsp;comment):<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-keyword style=color:#333;font-weight:700;line-height:26px>if</span>&nbsp;self.admin_notify:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;body&nbsp;=&nbsp;self.format(thread,&nbsp;comment)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.sendmsg(thread[<span class=hljs-string style=color:#d14;line-height:26px>"title"</span>],&nbsp;body)<br><br>&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;sendmsg(self,&nbsp;title,&nbsp;body):<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-keyword style=color:#333;font-weight:700;line-height:26px>if</span>&nbsp;self.moderated:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TA_view&nbsp;=&nbsp;body[<span class=hljs-string style=color:#d14;line-height:26px>"v"</span>]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TA_delete&nbsp;=&nbsp;body[<span class=hljs-string style=color:#d14;line-height:26px>"d"</span>]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TA_activate&nbsp;=&nbsp;body[<span class=hljs-string style=color:#d14;line-height:26px>"a"</span>]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;body&nbsp;=&nbsp;body[<span class=hljs-string style=color:#d14;line-height:26px>"rv"</span>]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-keyword style=color:#333;font-weight:700;line-height:26px>if</span>&nbsp;PY2K:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-keyword style=color:#333;font-weight:700;line-height:26px>if</span>&nbsp;title:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;title&nbsp;=&nbsp;title.encode(<span class=hljs-string style=color:#d14;line-height:26px>"utf-8"</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;body&nbsp;=&nbsp;body.encode(<span class=hljs-string style=color:#d14;line-height:26px>"utf-8"</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-keyword style=color:#333;font-weight:700;line-height:26px>if</span>&nbsp;self.moderated:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-comment style=color:#998;font-style:italic;line-height:26px>#&nbsp;Need&nbsp;to&nbsp;review&nbsp;comments,&nbsp;use&nbsp;the&nbsp;TalkAdmin&nbsp;interface.</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;host&nbsp;=&nbsp;<span class=hljs-string style=color:#d14;line-height:26px>"http://sc.ftqq.com"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;path&nbsp;=&nbsp;<span class=hljs-string style=color:#d14;line-height:26px>"/webhook/%s?%s"</span>&nbsp;%&nbsp;(self.conf.get(<span class=hljs-string style=color:#d14;line-height:26px>"takey"</span>),&nbsp;urlencode(dict(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TA_action_on=1,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TA_title=title,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TA_content=body,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TA_view=TA_view,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TA_delete=TA_delete,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TA_activate=TA_activate<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-keyword style=color:#333;font-weight:700;line-height:26px>else</span>:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;host&nbsp;=&nbsp;<span class=hljs-string style=color:#d14;line-height:26px>"https://sc.ftqq.com"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;path&nbsp;=&nbsp;<span class=hljs-string style=color:#d14;line-height:26px>"/%s.send?%s"</span>&nbsp;%&nbsp;(self.conf.get(<span class=hljs-string style=color:#d14;line-height:26px>"sckey"</span>),&nbsp;urlencode(dict(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text=title,&nbsp;desp=body<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)))<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;curl(<span class=hljs-string style=color:#d14;line-height:26px>"POST"</span>,&nbsp;host,&nbsp;path,&nbsp;5)&nbsp;as&nbsp;resp:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-keyword style=color:#333;font-weight:700;line-height:26px>if</span>&nbsp;resp:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result&nbsp;=&nbsp;json.loads(resp.read())<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;(TypeError,&nbsp;ValueError):<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logger.error(<span class=hljs-string style=color:#d14;line-height:26px>"Illegal&nbsp;response&nbsp;structure,&nbsp;request&nbsp;error."</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-keyword style=color:#333;font-weight:700;line-height:26px>else</span>:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=hljs-keyword style=color:#333;font-weight:700;line-height:26px>if</span>&nbsp;result.get(<span class=hljs-string style=color:#d14;line-height:26px>"errno"</span>)&nbsp;!=&nbsp;0:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logger.warn(result)<br></code></pre><h3 data-tool=mdnice编辑器 style=padding:0;color:#000;font-size:17px;font-weight:700;text-align:center;position:relative;margin-top:20px;margin-bottom:20px><span class=prefix style=display:none></span><span class=content style="border-bottom:2px solid RGBA(79,177,249,.65);color:#2b2b2b;padding-bottom:2px"><span style=width:30px;height:30px;display:block;background-image:url(https://files.mdnice.com/fullstack-2.png);background-position:50%;background-size:30px;margin:auto;opacity:1;background-repeat:no-repeat;margin-bottom:-8px></span>NO.3 修改share/isso.conf文件</span><span class=suffix style=display:none></span></h3><p data-tool=mdnice编辑器 style="padding-top:8px;padding-bottom:8px;line-height:26px;color:#2b2b2b;margin:10px 0;letter-spacing:2px;font-size:14px;word-spacing:2px">在末尾添加</p><pre class=custom data-tool=mdnice编辑器 style="margin-top:10px;margin-bottom:10px;border-radius:5px;box-shadow:rgba(0,0,0,.55)0 2px 10px"><span style="display:block;background:url(https://files.mdnice.com/point.png);height:30px;width:100%;background-size:40px;background-repeat:no-repeat;background-color:#f8f8f8;margin-bottom:-7px;border-radius:5px;background-position:10px 10px"></span><code class=hljs style="overflow-x:auto;padding:16px;color:#333;display:-webkit-box;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;font-size:12px;-webkit-overflow-scrolling:touch;letter-spacing:0;padding-top:15px;background:#f8f8f8;border-radius:5px">[wechat]<br><span class=hljs-comment style=color:#998;font-style:italic;line-height:26px>#&nbsp;Isso&nbsp;can&nbsp;notify&nbsp;you&nbsp;on&nbsp;new&nbsp;comments&nbsp;via&nbsp;wechat.&nbsp;In&nbsp;the&nbsp;wechat&nbsp;notification,</span><br><span class=hljs-comment style=color:#998;font-style:italic;line-height:26px>#&nbsp;you&nbsp;also&nbsp;can&nbsp;moderate&nbsp;(=activate&nbsp;or&nbsp;delete)&nbsp;comments.</span><br><br><span class=hljs-comment style=color:#998;font-style:italic;line-height:26px>#&nbsp;ServerChan&nbsp;api&nbsp;credentials&nbsp;(similar&nbsp;to&nbsp;token).</span><br><span class=hljs-comment style=color:#998;font-style:italic;line-height:26px>#&nbsp;Enabled&nbsp;when&nbsp;moderation&nbsp;is&nbsp;not&nbsp;enabled.</span><br>sckey&nbsp;=<br><br><span class=hljs-comment style=color:#998;font-style:italic;line-height:26px>#&nbsp;TalkAdmin&nbsp;WebHook&nbsp;Key.</span><br><span class=hljs-comment style=color:#998;font-style:italic;line-height:26px>#&nbsp;Enabled&nbsp;when&nbsp;moderation&nbsp;is&nbsp;enabled.</span><br>takey&nbsp;=<br></code></pre><p data-tool=mdnice编辑器 style="padding-top:8px;padding-bottom:8px;line-height:26px;color:#2b2b2b;margin:10px 0;letter-spacing:2px;font-size:14px;word-spacing:2px">这是微信审核所需要的配置信息，根据模式不同，选填sckey或takey，参考<a href=https://isso-cn.rtfd.vip/zh_CN/latest/docs/configuration/server/#wechat style="text-decoration:none;word-wrap:break-word;color:#40b8fa;font-weight:400;border-bottom:1px solid #3baafa">Wechat文档</a></p><h3 data-tool=mdnice编辑器 style=padding:0;color:#000;font-size:17px;font-weight:700;text-align:center;position:relative;margin-top:20px;margin-bottom:20px><span class=prefix style=display:none></span><span class=content style="border-bottom:2px solid RGBA(79,177,249,.65);color:#2b2b2b;padding-bottom:2px"><span style=width:30px;height:30px;display:block;background-image:url(https://files.mdnice.com/fullstack-2.png);background-position:50%;background-size:30px;margin:auto;opacity:1;background-repeat:no-repeat;margin-bottom:-8px></span>END</span><span class=suffix style=display:none></span></h3></section></p><br><center>·End·</center></div><div class=post-copyright><p class=copyright-item><span>Author:</span>
<span>Hiroshi.tao</span></p><p class=copyright-item><span>Link:</span>
<a href=https://blog.saintic.com/blog/284.html>https://blog.saintic.com/blog/284.html</span></p><p class="copyright-item lincese">本文采用 <a rel=license href=http://creativecommons.org/licenses/by-nc/4.0/ target=_blank>知识共享署名-非商业性使用 4.0 国际许可协议</a> 进行许可</p></div><div class=post-tags><section><i class="saintic-icon saintic-icon-tag"></i>Tag(s):
<a href=/tags/%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F.html rel=tag class=post-tags-link>#评论系统</a></section><section><a href=javascript:window.history.back();>back</a></span> ·
<span><a href=https://blog.saintic.com>home</a></span></section></div><div class=post-nav><a href=https://blog.saintic.com/blog/282.html class=prev rel=prev title=分享：Layui头像裁剪组件><i class="saintic-icon saintic-icon-angle-left"></i>&nbsp;分享：Layui头像裁剪组件</a>
<a href=https://blog.saintic.com/blog/285.html class=next rel=next title=分享：通过用户脚本上传网站图片到你的图床>分享：通过用户脚本上传网站图片到你的图床&nbsp;<i class="saintic-icon saintic-icon-angle-right"></i></a></div><div class=post-comment><div id=utteranc-container><script src=https://utteranc.es/client.js repo=staugur/staugur.github.io issue-term=pathname theme=github-light crossorigin=anonymous async></script></div></div></article></div></main><footer class=footer><div class=copyright>&copy;
<span itemprop=copyrightYear>2017 - 2025</span>
<span class=with-love><i class="saintic-icon saintic-icon-love"></i></span>
<span class=author itemprop=copyrightHolder><a href=https://blog.saintic.com>Hiroshi.tao</a> |</span>
<a href=https://beian.miit.gov.cn/ target=_blank rel="external nofollow">京ICP备14058611号-1</a> |
<span>Powered by <a href=https://gohugo.io/ target=_blank rel="external nofollow">Hugo</a> & <a href=https://github.com/SaintIC/Mogege target=_blank rel="external nofollow">Mogege</a></span>
<span>| <a href=https://www.foreverblog.cn/go.html target=_blank title=穿梭虫洞-随机访问十年之约友链博客>虫洞</span></div></footer><script defer src=/js/vendor_main.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/pangu@4.0.7/dist/browser/pangu.min.js integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin=anonymous></script>
<script>pangu.spacingPage()</script><script defer src=https://blog.saintic.com/js/my.js></script></div></body></html>