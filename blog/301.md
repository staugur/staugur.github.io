---
title: Vuepressä½¿ç”¨utterancesè¯„è®ºç³»ç»Ÿ
date: 2020-11-03
sidebar: 'auto'
categories:
  - å¼€å‘
  - éšç¬”
tags:
  - js
  - è¯„è®ºç³»ç»Ÿ
---

:::tip
[utterances](https://utteranc.es/) æ˜¯ä¸€æ¬¾åŸºäº GitHub issues çš„è¯„è®ºç³»ç»Ÿã€‚
:::

<!-- more -->

## å‰è¨€

æˆ‘ç”¨è¿‡çš„è¯„è®ºç³»ç»Ÿå…ˆåæœ‰ï¼šå¤šè¯´-ç•…è¨€-gitment-valine-isso-utterances

å‰ä¸¤è€…ï¼Œå¤šè¯´å…³é—­åè½¬åˆ°ç•…è¨€ï¼Œä½†åæ¥å¹¿å‘Šã€UIç­‰ç­‰é—®é¢˜ä¸»åŠ¨è½¬åˆ°gitmentï¼ŒåŸºäºgithub issueçš„
è¯„è®ºç³»ç»Ÿï¼Œç±»ä¼¼çš„è¿˜æœ‰gitalkã€‚

gitmentã€gitalkä¸¤è€…è®¾è®¡ç±»ä¼¼ï¼Œæ˜æ˜¾çš„ç¼ºé™·æ˜¯ï¼Œè¦æ±‚æƒé™è¿‡å¤šï¼Œä¸”æœ‰
[å®‰å…¨æ€§äº‰è®®](https://blog.wolfogre.com/posts/security-problem-of-gitment/)ï¼Œ
æ­¤å¤–éƒ¨ç½²èµ·æ¥ç›¸å¯¹éº»çƒ¦ã€‚

åæ¥åˆçœ‹åˆ°äº†valineè¿™æ¬¾ï¼Œé¢œå€¼ä¹ŸæŒºé«˜ï¼Œå·ç§°æ— åç«¯ï¼Œä¸è¿‡å®é™…æ•°æ®æ‰˜ç®¡ä½¿ç”¨äº†LeanCloudã€‚

åœ¨ä½¿ç”¨valineè¿‡ç¨‹ä¸­ï¼Œä¹Ÿæœ‰å¾ˆå¤šä¸æ–¹ä¾¿çš„ï¼Œæ¯”å¦‚æ–°è¯„è®ºé€šçŸ¥ã€å›å¤é€šçŸ¥ç­‰ï¼Œè™½ç„¶å†™äº†è„šæœ¬å¤„ç†ï¼Œä½†åæ¥
è¿˜æ˜¯å†³å®šæ•°æ®è‡ªæ‰˜ç®¡ï¼Œäºæ˜¯è°ƒç ”éƒ¨ç½²äº†issoâ€”â€”ä¸€æ¬¾pythonå†™çš„è¯„è®ºç³»ç»Ÿã€‚

issoéƒ¨ç½²è¿˜æ˜¯æ¯”è¾ƒéº»çƒ¦çš„ï¼Œä¸è¿‡è¯„è®ºæ¡†ç®€æ´ï¼Œç»è¿‡forkè‡ªå·±æ›´æ–°çš„ä»“åº“ï¼ŒåŠŸèƒ½ä¹Ÿæ»¡è¶³è¦æ±‚ï¼Œç”¨äº†ä¸€æ®µæ—¶é—´ã€‚

> é¡ºä¾¿ä¸€æï¼Œæˆ‘forkçš„[isso-cn](https://github.com/staugur/isso-cn)ä¸»è¦æ˜¯å¢åŠ äº†
> å¾®ä¿¡å®¡æ ¸ï¼Œé¡ºä¾¿ç¿»è¯‘äº†[æ–‡æ¡£](https://isso-cn.rtfd.vip)
>
> PS: å¦å¤–ï¼Œä¸ªäººéƒ¨ç½²issoååšæˆäº†æœåŠ¡ï¼Œå…¶ä»–ç”¨æˆ·å¯ä»¥æ— éœ€æœåŠ¡å™¨ç›´æ¥æ¥å…¥Issoå»ºç«‹è¯„è®ºåŠŸèƒ½ï¼Œ
> å‚è€ƒ[è¯é¢„å¹³å°å¼€æ”¾çš„issoæœåŠ¡](https://open.saintic.com/openservice/isso)

ä¸è¿‡åæ¥åšå®¢çš„æ–‡ç« æ¶‰åŠäº†ä¸€äº›è¯è¢«çŸ­æš‚å…³é—­ï¼Œç”±äºå½“æ—¶åšå®¢ç•Œé¢ä¸å¥½çœ‹+ä¸æƒ³å†é‡æ„ï¼Œæ‰€ä»¥
åˆè¿ç§»åˆ°GitHub Pages/Vuepressï¼Œè¯„è®ºç³»ç»Ÿä¹Ÿæ¢æˆäº†utterancesï¼Œæ•…æœ‰æ­¤æ–‡ã€‚

## Utterances comment

å®˜æ–¹ç«™ç‚¹åŠè¯´æ˜ï¼š[https://utteranc.es](https://utteranc.es/)

### ç‰¹ç‚¹

- å¼€æºã€‚ğŸ“–
- æ²¡æœ‰è¿½è¸ªï¼Œæ²¡æœ‰å¹¿å‘Šï¼Œæ°¸ä¹…å…è´¹ã€‚â™»ï¸
- ä¸ä¿ç•™æ•°æ®ï¼Œæ‰€æœ‰æ•°æ®ä¿å­˜åœ¨ç”¨æˆ· GitHub issue ä¸­ã€‚ğŸ“š
- æœ‰æºäº Github primer çš„å¤šä¸ªä¸»é¢˜ã€‚ğŸŒˆ
- è½»é‡åŒ–ï¼Œæ²¡æœ‰å­—ä½“ä¸‹è½½ï¼Œæ²¡æœ‰ JS æ¡†æ¶åŠ è½½ï¼Œæ²¡æœ‰polyfillsã€‚ğŸœ

è½»é‡ã€é…ç½®ç®€å•ï¼ŒUIç¾è§‚ï¼Œä¸€è‡´çš„issueä½“éªŒç­‰ã€‚

### å¦‚ä½•å·¥ä½œ

UtterancesåŠ è½½æ—¶ï¼Œå°†ä½¿ç”¨GitHub [issue search api](https://developer.github.com/v3/search/#search-issues)æ ¹æ® `url`, `pathname` æˆ– `title` æŸ¥æ‰¾ä¸é¡µé¢ç›¸å…³çš„issueã€‚
å¦‚æœæ‰¾ä¸åˆ°ä¸é¡µé¢åŒ¹é…çš„issueï¼Œå³æ²¡æœ‰è¯„è®ºã€‚
å½“æœ‰äººé¦–æ¬¡å‘è¡¨è¯„è®ºæ—¶ï¼Œ[utterances-bot](https://github.com/utterances-bot)ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªissueã€‚

è¦å‘è¡¨è¯„è®ºï¼Œç”¨æˆ·å¿…é¡»æˆæƒutterances appä»¥ä»£è¡¨ç”¨æˆ·å‘å¸–ï¼Œæˆ–è€…ï¼Œç”¨æˆ·å¯ä»¥ç›´æ¥åœ¨GitHub issueä¸Šè¯„è®ºã€‚

### å®‰è£…ä½¿ç”¨

ç¡®ä¿æœ‰ä¸ªå…¬å¼€ä»“åº“ï¼Œç„¶åå®‰è£…[utterances app](https://github.com/apps/utterances)é…ç½®
å®ƒå…è®¸è°ƒç”¨çš„ä»“åº“ï¼Œä¹‹åéœ€è¦è¯„è®ºçš„é¡µé¢å¼•å…¥client.jså°±å¯ä»¥äº†ã€‚

å¼•å…¥client.jséœ€è¦è®¾ç½®ä¸€äº›å‚æ•°ï¼Œè¯¦æƒ…è¿˜æ˜¯å‚è€ƒå®˜ç½‘ã€‚

ä»¥åç”¨æˆ·å‘è¡¨è¯„è®ºåªéœ€è¦ç‚¹å‡»ç™»å½•é€šè¿‡OAuth Appæˆæƒutteranceså³å¯ã€‚

![](https://static.saintic.com/picbed/staugur/2020/11/03/utterancesapp.png)

### å¤‡æ³¨

- utterancesé»˜è®¤ä½¿ç”¨çš„æœåŠ¡éƒ¨ç½²åœ¨cloudflareï¼Œå›½å†…è®¿é—®é€Ÿåº¦å¯èƒ½å¹¶ä¸ç†æƒ³ã€‚

- utteranceså®é™…ä¸Šå¯ä»¥è‡ªè¡Œéƒ¨ç½²çš„ï¼Œå›½äººæœ‰åŸºäºå…¶ç‰ˆæœ¬å¼€å‘çš„ä¸­æ–‡ç‰ˆï¼š[beaudar](https://beaudar.lipk.org/)

## Vuepress utterances

### å•ç»„ä»¶

å‰é¢æœ‰è¯´åšå®¢è¿ç§»åˆ°github pagesï¼Œç”¨çš„vuepressç”Ÿæˆçš„é™æ€ç«™ç‚¹ï¼Œè¯„è®ºä¹Ÿåˆ‡æ¢ä¸ºutterancesï¼Œä½†æ˜¯
ç›®å‰ç½‘ä¸Šæˆ‘å¥½åƒæ²¡æ‰¾åˆ°vuepressé›†æˆutterancesçš„æ’ä»¶ï¼Œæ‰€ä»¥å†™äº†ä¸€ä¸ªå…¨å±€ç»„ä»¶ï¼š

```vue
<template>
    <div id="comment"></div>
</template>

<script>
export default {
    name: 'Utterances',
    methods: {
        initValine() {
            let utterances = window.document.createElement('script')
            utterances.type = 'text/javascript'
            utterances.async = true
            utterances.setAttribute('issue-term', 'pathname')
            utterances.setAttribute('theme', 'github-light')
            utterances.setAttribute('repo', 'staugur/staugur.github.io')
            utterances.crossorigin = 'anonymous'
            utterances.src = 'https://utteranc.es/client.js'
            window.document.getElementById('comment').appendChild(utterances)
        }
    },
    mounted() {
        this.initValine()
    }
}
</script>

<style>
.utterances {
    position: relative;
    box-sizing: border-box;
    width: 100%;
    max-width: 760px;
    margin-left: 0;
    margin-right: auto;
}

.utterances-frame {
    position: absolute;
    left: 0;
    right: 0;
    width: 1px;
    min-width: 100%;
    max-width: 100%;
    height: 100%;
    border: 0;
}
</style>
```

ç”¨æ³•ï¼š

ä¸Šä¼ ä»£ç ä¿å­˜åœ¨ä½ çš„ `.vuepress/components/` ä¸‹ï¼Œä¼šè¢«è‡ªåŠ¨æ³¨å†Œä¸ºå…¨å±€ç»„ä»¶ï¼Œä¹‹ååœ¨markdown
æ–‡ç« åº•éƒ¨æ”¾å…¥ `<Utterances />` å³å¯åŠ è½½è¯„è®ºã€‚

### æ’ä»¶åŒ–

ä¸è¿‡ä¸Šè¿°ç»„ä»¶éœ€è¦æ‰‹åŠ¨å¼•å…¥ï¼Œç”¨èµ·æ¥ä¸æ˜¯å¾ˆæ–¹ä¾¿ï¼Œæ‰€ä»¥æˆ‘ç ”ç©¶å‚è€ƒ
[vuepress-plugin-comment](https://github.com/dongyuanxin/vuepress-plugin-comment)ã€
[@ido-design/vuepress-plugin-comment](https://github.com/Timi-design/vuepress-plugin-timi/tree/master/vuepress-plugin-comments)å®ç°äº†
vuepress-plugin-utterances

github: [staugur/vuepress-plugin-utterances](https://github.com/staugur/vuepress-plugin-utterances)

npm package: [@saintic/vuepress-plugin-utterances](https://www.npmjs.com/package/@saintic/vuepress-plugin-utterances)

demo: æœ¬ç«™åº•éƒ¨
